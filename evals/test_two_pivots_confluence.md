# 測試案例 2：兩個參考點匯聚偵測

## 輸入

```
/gann-btc 2024-11-10 high 93000, 2024-01-23 low 38500 --current 67000 --range 360
```

## 預期行為

1. 從兩個參考點分別生成投射日期
2. 合併後排序
3. 在 ±3 天容差窗口內偵測匯聚點
4. 匯聚分數至少 ≥ 2（因為有兩個不同來源）

## 關鍵驗證

### 來源 1: 2024-11-10 high $93,000
- +90d → 2025-02-08
- +120d → 2025-03-10
- +180d → 2025-05-09
- +360d → 2025-11-05

### 來源 2: 2024-01-23 low $38,500
- +360d → 2025-01-18
- +377d (費波) → 2025-02-04
- +400d (平方) → 2025-02-26
- +720d → 2025-01-13

### 可能的匯聚點（需 Python 驗算確認）

- 2025-02-07/08 附近：來源1 +89d (費波) = 02-07, 來源1 +90d (標準) = 02-08 → 但同一來源不同類型仍可計分 2
- 2025-01-13 附近：來源2 +720d (標準) = 01-13, 來源2 +355d... → 需詳查

### 匯聚偵測驗證重點

1. 匯聚分數計算正確（unique source × category pairs）
2. ±3 天容差正確執行
3. 分數 ≥ 2 才顯示
4. 按分數降序排列

## Python 驗算命令

```bash
python scripts/gann_calc.py \
  --pivots '[{"date":"2024-11-10","type":"high","price":93000},{"date":"2024-01-23","type":"low","price":38500}]' \
  --current 67000 \
  --range 360 \
  --today 2025-01-01
```
