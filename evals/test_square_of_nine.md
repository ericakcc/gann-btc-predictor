# 測試案例 3：九宮格支撐/阻力計算

## 輸入

目前價格 $67,000

## 預期結果

√67000 ≈ 258.8436...

### 手算驗證

#### 45° (increment = 0.25)

- 阻力 1 層 = (258.8436 + 0.25)² = (259.0936)² = 67,129 (四捨五入)
- 阻力 2 層 = (258.8436 + 0.50)² = (259.3436)² = 67,259
- 支撐 1 層 = (258.8436 - 0.25)² = (258.5936)² = 66,871
- 支撐 2 層 = (258.8436 - 0.50)² = (258.3436)² = 66,742

#### 90° (increment = 0.50)

- 阻力 1 層 = (258.8436 + 0.50)² = 67,259
- 阻力 2 層 = (258.8436 + 1.00)² = 67,519
- 支撐 1 層 = (258.8436 - 0.50)² = 66,742
- 支撐 2 層 = (258.8436 - 1.00)² = 66,484

#### 180° (increment = 1.00)

- 阻力 1 層 = (258.8436 + 1.00)² = 67,519
- 阻力 2 層 = (258.8436 + 2.00)² = 68,040
- 支撐 1 層 = (258.8436 - 1.00)² = 66,484
- 支撐 2 層 = (258.8436 - 2.00)² = 65,969

#### 270° (increment = 1.50)

- 阻力 1 層 = (258.8436 + 1.50)² = 67,779
- 阻力 2 層 = (258.8436 + 3.00)² = 68,562
- 支撐 1 層 = (258.8436 - 1.50)² = 66,226
- 支撐 2 層 = (258.8436 - 3.00)² = 65,456

#### 360° (increment = 2.00)

- 阻力 1 層 = (258.8436 + 2.00)² = 68,040
- 阻力 2 層 = (258.8436 + 4.00)² = 69,087
- 支撐 1 層 = (258.8436 - 2.00)² = 65,969
- 支撐 2 層 = (258.8436 - 4.00)² = 64,946

## Python 驗算命令

```bash
python scripts/gann_calc.py \
  --pivots '[{"date":"2024-11-10","type":"high","price":93000}]' \
  --current 67000 \
  --range 1
```

只看九宮格部分的輸出。

## 驗證重點

1. 所有價格四捨五入至整數
2. 支撐價格 < 目前價格 < 阻力價格
3. 層數越大（2 層），距離目前價格越遠
4. 角度越大（360°），價格間距越大
5. 容許 ±1 的四捨五入誤差
